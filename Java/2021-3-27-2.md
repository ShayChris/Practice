## ThreadLocal 实现原理是什么？
### ThreadLocal的作用
ThreadLocal是解决线程安全问题一个很好的思路，它通过为每一个线程提供一个独立的变量副本解决了变量并发访问的冲突
问题。在很多情况下，ThreadLocal比直接使用synchronized同步机制解决线程安全问题更简单，更方便，且结果程序拥有
更高的并发性。
#### ThreadLocal的使用场景
在Java的多线程编程中，为保证多个线程对共享变量的安全访问，通常会使用synchronized来保证同一时刻只有一个线程对
共享变量进行操作。这种情况下可以将类变量放到ThreadLocal类型的对象中，使变量在每个线程中都有独立拷贝，不会出现
一个线程读取变量时而被另一个线程修改的现象。常见的使用场景为用来解决数据库连接，session管理等。
### ThreadLocal的原理
在每个线程Thread内部有一个ThreadLocal.ThreadLocalMap类型的成员变量threadLocals，这个threadLocals就是用来存储
实际的变量副本的，键值为当前ThreadLocal变量，value为变量副本。初始时，在Thread里面，threadLocals为空，当通过
get或者set方法，就会对Thread类中的threadLocals进行初始化，并且以当前ThreadLocal变量为键值，以ThreadLocal要
保存的副本变量为value，存到threadLocals。然后在当前线程里面，如果要使用副本变量，就通过get方法在threadLocals。
然后在当前线程里面，如果要使用副本变量，就可以通过get方法在threadLocals里面查找。