## 简述 Redis 中如何防止缓存雪崩和缓存击穿



### 缓存雪崩
Redis挂掉，或者同一时间内缓存数据一起过期，导致某段时间内缓存失败，请求全部走数据库，很可能导致数据库挂掉。  
事发前解决办法：
1.缓存过期时间都加上一个随机值，使大批数据不会同一时间内失效  
2.实现Redis的高可用（主从架构+哨兵或者Redis集群，避免Redis挂掉）  
事发中解决办法：  
1.设置本地缓存+限流，避免数据库挂掉  
事发后解决办法：  
1.Redis持久化，重启后自动从磁盘上加载数据，快速恢复

### 缓存穿透
缓存穿透是指查询一个一定不存在的数据。由于缓存不命中，并且出于容错考虑，如果从数据库查不到数据则不写入缓存，这将导致这个不存在的数据每次请求都要到数据库去查询，失去了缓存的意义。  
解决办法：  
1.由于请求的参数是不合法的，于是我们可以使用过滤器进行拦截，不合法就不让这个请求到数据库层。  
2.当数据库找不到时，也可以将这个空对象写入缓存，设置一个较短的过期时间，下次再请求，就会从缓存里获取。