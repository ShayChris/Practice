## 什么情况下会发生死锁，如何解决死锁？

### 死锁产生的必要条件
1.互斥条件：一个资源只能一个进程占有，不可以被两个或多个进程占有 
2.不可抢占条件：进程已经获取的资源没使用完之前不能被抢占，只能使用完后由自己释放  
3.占有申请条件：进程自己至少保持一个资源，又申请其他资源，其他资源又被别的进程占有，而且又不释放自己已经占有的资源  
4.循环等待条件：发送死锁时，必定会形成一个进程——资源的环路，例：a请求b占有的资源，b请求a占有的资源

#### 如何解决死锁
1.加锁顺序，不同的线程间要按照同样的顺序加锁。
2.加锁时限，线程获取锁的时候加上一定的超时时间，超过时间就放弃对锁的请求，并且释放自己所占有的锁。  
3.死锁处理，检测到死锁后，释放掉所有的锁，随机等待一段时间后再进行重试。  